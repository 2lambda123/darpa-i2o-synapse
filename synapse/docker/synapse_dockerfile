
FROM ubuntu:16.04
MAINTAINER foo

# docker build -t synapse/synapse -f ~/git/synapse/synapse/docker/synapse_dockerfile ~/git/synapse

RUN apt-get update -q\
 && apt-get upgrade -y\
 && apt-get install -yq --no-install-recommends\ 
    build-essential\
    git\
    libffi6\
    libffi-dev\
    libgmp3-dev\
    libssl-dev\
    python3\
    python3-dev\
    python3-pip\
    python3-setuptools\
    vim\
    wget\
 && apt-get clean\
 && apt-get purge 

RUN pip3 install --upgrade\
    pip\
    setuptools\
    wheel

RUN pip3 install --upgrade\
    cryptography\ 
    msgpack-python\
    tornado

RUN mkdir ~/git &&\
 mkdir /syndata

VOLUME /syndata

RUN cd /root/git && git clone https://github.com/vivisect/synapse.git &&\
 cd /root/git/synapse && python3 setup.py develop

VOLUME /root/git/synapse
WORKDIR /root/git/synapse

